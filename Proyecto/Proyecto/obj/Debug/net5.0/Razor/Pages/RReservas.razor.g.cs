#pragma checksum "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "5a98894a254a9caa4bcaa268de173820f19940c3"
// <auto-generated/>
#pragma warning disable 1591
namespace Proyecto.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Proyecto;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Proyecto.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 13 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using System.Net.Http.Headers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 14 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using BlazorInputFile;

#line default
#line hidden
#nullable disable
#nullable restore
#line 15 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using System.IO;

#line default
#line hidden
#nullable disable
#nullable restore
#line 16 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\_Imports.razor"
using MoreLinq.Extensions;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
           [Authorize]

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/RReservas")]
    public partial class RReservas : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "container");
            __builder.OpenElement(2, "div");
            __builder.AddAttribute(3, "class", "card");
            __builder.AddMarkupContent(4, "<div class=\"card-header\"><h3>Reservar Vehiculo</h3></div>\r\n        ");
            __builder.OpenElement(5, "div");
            __builder.AddAttribute(6, "class", "card-body");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "form-group");
            __builder.AddMarkupContent(9, "\r\n                Cliente:\r\n                ");
            __builder.OpenElement(10, "input");
            __builder.AddAttribute(11, "class", "form-control");
            __builder.AddAttribute(12, "disabled");
            __builder.AddAttribute(13, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 15 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                   ClienteNombre

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(14, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => ClienteNombre = __value, ClienteNombre));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(15, "\r\n                ");
            __builder.OpenElement(16, "button");
            __builder.AddAttribute(17, "class", "btn btn-secondary btn-block");
            __builder.AddAttribute(18, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 16 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                      Cambiar

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(19, "Seleccionar Cliente");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(20, "\r\n            ");
            __builder.OpenElement(21, "div");
            __builder.AddAttribute(22, "class", "form-group");
            __builder.AddMarkupContent(23, "\r\n                Desde:\r\n                ");
            __builder.OpenElement(24, "input");
            __builder.AddAttribute(25, "type", "date");
            __builder.AddAttribute(26, "class", "form-control");
            __builder.AddAttribute(27, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 20 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                                                        FechaCambio

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(28, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 20 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                          fecha1

#line default
#line hidden
#nullable disable
            , format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(29, "OnInput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => fecha1 = __value, fecha1, format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(30, "\r\n            ");
            __builder.OpenElement(31, "div");
            __builder.AddAttribute(32, "class", "form-group");
            __builder.AddMarkupContent(33, "\r\n                Hasta:\r\n                ");
            __builder.OpenElement(34, "input");
            __builder.AddAttribute(35, "type", "date");
            __builder.AddAttribute(36, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.ChangeEventArgs>(this, 
#nullable restore
#line 25 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                                   FechaCambio2

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(37, "class", "form-control");
            __builder.AddAttribute(38, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 25 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                          fecha2

#line default
#line hidden
#nullable disable
            , format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(39, "OnInput", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => fecha2 = __value, fecha2, format: "yyyy-MM-dd", culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(40, "\r\n                ");
            __builder.OpenElement(41, "button");
            __builder.AddAttribute(42, "class", "btn btn-secondary btn-block");
            __builder.AddAttribute(43, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 26 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                      Cambiar2

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(44, "Seleccionar Vehiculos Disponibles en esa fecha");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(45, "\r\n            ");
            __builder.OpenElement(46, "div");
            __builder.AddAttribute(47, "class", "form-group");
            __builder.AddMarkupContent(48, "\r\n                Vehiculo:\r\n                ");
            __builder.OpenElement(49, "input");
            __builder.AddAttribute(50, "class", "form-control");
            __builder.AddAttribute(51, "disabled");
            __builder.AddAttribute(52, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 30 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                   VehiculoNombre

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(53, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => VehiculoNombre = __value, VehiculoNombre));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n            ");
            __builder.OpenElement(55, "div");
            __builder.AddAttribute(56, "class", "form-group");
            __builder.OpenElement(57, "button");
            __builder.AddAttribute(58, "class", "btn btn-success btn-block");
            __builder.AddAttribute(59, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 33 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                    Reservar

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(60, "Reservar Vehiculo");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 42 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
     if (vofReserva)
    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(61, "<h1 class=\"alert alert-success\">Reserva realizada correctamente</h1>");
#nullable restore
#line 45 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 47 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
     if (vof)
    {




#line default
#line hidden
#nullable disable
            __builder.OpenElement(62, "div");
            __builder.AddAttribute(63, "class", "contenedor-modal");
            __builder.OpenElement(64, "div");
            __builder.AddAttribute(65, "class", "ventana ");
#nullable restore
#line 55 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                 if (vofCliente)
                {



#line default
#line hidden
#nullable disable
            __builder.OpenElement(66, "div");
            __builder.AddAttribute(67, "class", "card text-center overflow-auto");
            __builder.AddMarkupContent(68, "<div class=\"card-header \">\r\n                            Seleccionar Cliente\r\n                        </div>\r\n                        ");
            __builder.OpenElement(69, "div");
            __builder.AddAttribute(70, "class", "card-body ");
            __builder.OpenElement(71, "table");
            __builder.AddAttribute(72, "class", "table table-responsive-sm table-hover");
            __builder.AddMarkupContent(73, "<thead><tr><th>Foto</th>\r\n                                        <th>Cliente</th>\r\n                                        <th>Seleccionar</th></tr></thead>\r\n                                ");
            __builder.OpenElement(74, "tbody");
#nullable restore
#line 76 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                     foreach (var x in clientes)
                                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(75, "tr");
            __builder.OpenElement(76, "td");
            __builder.OpenElement(77, "a");
            __builder.AddAttribute(78, "href", 
#nullable restore
#line 79 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                          x.FotoP

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(79, "target", "_blank");
            __builder.OpenElement(80, "img");
            __builder.AddAttribute(81, "src", 
#nullable restore
#line 79 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                                              x.FotoP

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(82, "height", "100");
            __builder.AddAttribute(83, "width", "100");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(84, "\r\n                                            ");
            __builder.OpenElement(85, "td");
            __builder.AddContent(86, 
#nullable restore
#line 80 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                 x.Nombre

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(87, " ");
            __builder.AddContent(88, 
#nullable restore
#line 80 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                           x.Apellido

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(89, "\r\n                                            ");
            __builder.OpenElement(90, "td");
            __builder.OpenElement(91, "button");
            __builder.AddAttribute(92, "class", "btn btn-primary btn-block");
            __builder.AddAttribute(93, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 82 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                                                    (() => ObtenerCliente(x.ID, x.Nombre, x.Apellido))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(94, "\r\n                                                    SELECCIONAR\r\n                                                ");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 87 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(95, "\r\n                        ");
            __builder.OpenElement(96, "div");
            __builder.AddAttribute(97, "class", "card-footer");
            __builder.OpenElement(98, "button");
            __builder.AddAttribute(99, "class", "btn btn-dark btn-block");
            __builder.AddAttribute(100, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 93 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                             Cambiar

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(101, "Cerrar Ventana");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 96 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"

                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 102 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"

    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 105 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
     if (vof2)
    {



#line default
#line hidden
#nullable disable
            __builder.OpenElement(102, "div");
            __builder.AddAttribute(103, "class", "contenedor-modal");
            __builder.OpenElement(104, "div");
            __builder.AddAttribute(105, "class", "ventana");
#nullable restore
#line 111 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                 if (vofVehiculo)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(106, "div");
            __builder.AddAttribute(107, "class", "card text-center overflow-auto");
            __builder.AddMarkupContent(108, "<div class=\"card-header \">\r\n                            Seleccionar Vehiculo\r\n                        </div>\r\n                        ");
            __builder.OpenElement(109, "div");
            __builder.AddAttribute(110, "class", "card-body ");
            __builder.OpenElement(111, "table");
            __builder.AddAttribute(112, "class", "table table-responsive-sm table-hover");
            __builder.AddMarkupContent(113, "<thead><tr><th>Foto</th>\r\n                                        <th>Vehiculo</th>\r\n                                        <th>Seleccionar</th></tr></thead>\r\n                                ");
            __builder.OpenElement(114, "tbody");
#nullable restore
#line 130 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                     foreach (var x in vehiculos)
                                    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(115, "tr");
            __builder.OpenElement(116, "td");
            __builder.OpenElement(117, "a");
            __builder.AddAttribute(118, "href", 
#nullable restore
#line 133 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                          x.Foto

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(119, "target", "_blank");
            __builder.OpenElement(120, "img");
            __builder.AddAttribute(121, "src", 
#nullable restore
#line 133 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                                             x.Foto

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(122, "height", "100");
            __builder.AddAttribute(123, "width", "100");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(124, "\r\n                                            ");
            __builder.OpenElement(125, "td");
            __builder.AddContent(126, 
#nullable restore
#line 134 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                 x.Marca

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(127, " - ");
            __builder.AddContent(128, 
#nullable restore
#line 134 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                            x.Modelo

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(129, " - ");
            __builder.AddContent(130, 
#nullable restore
#line 134 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                        x.Color

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(131, "\r\n                                            ");
            __builder.OpenElement(132, "td");
            __builder.OpenElement(133, "button");
            __builder.AddAttribute(134, "class", "btn btn-primary btn-block");
            __builder.AddAttribute(135, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 136 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                                                    (() => ObtenerVehiculo(x.ID, x.Marca, x.Modelo, x.Color, x.Price))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(136, "\r\n                                                    SELECCIONAR\r\n                                                ");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 141 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(137, "\r\n                        ");
            __builder.OpenElement(138, "div");
            __builder.AddAttribute(139, "class", "card-footer");
            __builder.OpenElement(140, "button");
            __builder.AddAttribute(141, "class", "btn btn-dark btn-block");
            __builder.AddAttribute(142, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 147 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                                                                             Cambiar2

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(143, "Cerrar Ventana");
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 150 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 156 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 167 "D:\Tareas\5to Cuatrimestre\PROG 3\FINAL\Final\FinalProg3\Proyecto\Proyecto\Pages\RReservas.razor"
        // ----------------------------------------------------------- BEGIN -------------------------------------------------------------

    List<Reservas> reservas;
    List<Clientes> clientes;
    List<Vehiculos> vehiculos = new List<Vehiculos>();
    bool vofCargar = true;
    string modal = "contenedor-modal";
    bool vof = false;
    bool vof2 = false;

    bool vofCliente = false;
    bool vofVehiculo = false;
    bool vofReserva = false;

    string ClienteNombre = "";
    string ClienteID = "";
    string VehiculoNombre = "";
    string VehiculoID = "";
    string status = "";
    string precio = "";
    DateTime fecha1 = DateTime.Now;
    DateTime fecha2 = DateTime.Now.AddDays(1);



    void FechaCambio(ChangeEventArgs e)
    {
        fecha1 = Convert.ToDateTime(e.Value);
        VehiculoNombre = "";
        VehiculoID = "";
        precio = "";
    }
    void FechaCambio2(ChangeEventArgs e)
    {
        fecha2 = Convert.ToDateTime(e.Value);
        VehiculoNombre = "";
        VehiculoID = "";
        precio = "";
    }


    public async Task Cambiar()
    {
        if (vof)
        {
            vof = false;
        }
        else
        {
            vof = true;
            await VerClientes();
        }
    }

    public async Task Cambiar2()
    {
        if (vof2)
        {
            vof2 = false;
        }
        else
        {
            vof2 = true;
            await VerVehiculos();
        }
    }


    async Task VerClientes()
    {

        HttpClient http = new HttpClient();
        string URI = "https://finalprog3-930fc-default-rtdb.firebaseio.com/Clientes.json";

        var response = await http.GetAsync(URI);

        if (response.IsSuccessStatusCode)
        {
            var content = await response.Content.ReadAsStringAsync();

            var datos = JsonConvert.DeserializeObject<Dictionary<string, Clientes>>(content).ToList();

            var datos2 = from xd in datos
                         select new Clientes
                         {
                             ID = xd.Key,
                             Apellido = xd.Value.Apellido,
                             Cedula = xd.Value.Cedula,
                             Correo = xd.Value.Correo,
                             Estado = xd.Value.Estado,
                             FotoL = xd.Value.FotoL,
                             FotoP = xd.Value.FotoP,
                             Licencia = xd.Value.Licencia,
                             Nacionalidad = xd.Value.Nacionalidad,
                             Nombre = xd.Value.Nombre,
                             Sangre = xd.Value.Sangre



                         };

            clientes = datos2.Where(x => x.Estado == "YES").ToList();

            vofCliente = true;
        }



    }


    async Task ObtenerCliente(string id, string nombre, string apellido)
    {

        ClienteNombre = $"{nombre} {apellido}";
        ClienteID = id;

        await Cambiar();


    }

    async Task ObtenerVehiculo(string id, string marca, string modelo, string color, string price)
    {

        VehiculoNombre = $"{marca} - {modelo} - {color}";
        VehiculoID = id;
        precio = price;

        await Cambiar2();


    }



    async Task VerVehiculos()
    {

        HttpClient http = new HttpClient();

        string URI = "https://finalprog3-930fc-default-rtdb.firebaseio.com/Reservas.json";


        var response = http.GetAsync(URI);

        if (response.Result.IsSuccessStatusCode)
        {
            var content = await response.Result.Content.ReadAsStringAsync();

            var data = JsonConvert.DeserializeObject<Dictionary<string, Reservas>>(content).ToList();

            var data2 = from x in data
                        select new Reservas
                        {
                            VehiculoID = x.Value.VehiculoID,
                            Estado = x.Value.Estado,
                            Desde = x.Value.Desde,
                            Hasta = x.Value.Hasta
                        };

            var data3 = data2.Where(x =>
            (fecha1
            >= x.Desde
            && fecha2
            <= x.Hasta)
            ||
            (fecha1 <= x.Desde
            && fecha2 >= x.Hasta
            )
            ).Select(x => (x.VehiculoID, x.Hasta, x.Desde, x.Estado));

            var data4 = from x in data3 select new Reservas { Hasta = x.Hasta, Desde = x.Desde, Estado = x.Estado, VehiculoID = x.VehiculoID };

            reservas = data4.ToList();




            var response2 = await http.GetAsync($"https://finalprog3-930fc-default-rtdb.firebaseio.com/Vehiculos.json");
            if (response2.IsSuccessStatusCode)
            {
                var content2 = await response2.Content.ReadAsStringAsync();

                var dato7 = JsonConvert.DeserializeObject<Dictionary<string, Vehiculos>>(content2).ToList();


                var dato2 = (from dato in dato7
                             select new Vehiculos
                             {

                                 ID = dato.Key,
                                 Carga = dato.Value.Carga,
                                 Color = dato.Value.Color,
                                 Estado = dato.Value.Estado,
                                 Foto = dato.Value.Foto,
                                 Lat = dato.Value.Lat,
                                 Lng = dato.Value.Lng,
                                 Seguro = dato.Value.Seguro,
                                 Marca = dato.Value.Marca,
                                 Matricula = dato.Value.Matricula,
                                 Modelo = dato.Value.Modelo,
                                 Pasajeros = dato.Value.Pasajeros,
                                 Price = dato.Value.Price,
                                 Tipo = dato.Value.Tipo,
                                 Year = dato.Value.Year



                             }).ToList();



                var dato8 = from x in reservas select new Vehiculos { ID = x.VehiculoID };

                vehiculos = dato2.ExceptBy(dato8, c => c.ID).Where(x => x.Estado == "YES").ToList();
                //




                //  }


            }


            // vehiculos = lista.ToList();
            vofVehiculo = true;
            //await Cambiar2();
        }




    }

    async Task Reservar()
    {

        await CrearFactura();

    }

    async Task CrearFactura()
    {
        HttpClient http = new HttpClient();
        string URI = "https://finalprog3-930fc-default-rtdb.firebaseio.com/Facturas.json";

        TimeSpan dias = fecha2 - fecha1;

        int dias2 = dias.Days;

        double preciototal = dias2 * Convert.ToDouble(precio);

        var factura = new Factura { ClienteID = ClienteID, VehiculoID = VehiculoID, Pagada = "NO", Estado = "YES", Desde = fecha1.ToString(), Hasta = fecha2.ToString(), Monto = preciototal.ToString(), Debe = preciototal.ToString(), Pagado = "0" };


        var json = JsonConvert.SerializeObject(factura, Formatting.Indented);

        var factura2 = new StringContent(json);


        var res = await http.PostAsync(URI, factura2);

        if (res.IsSuccessStatusCode)
        {
            await ReservarVehiculo();
            ClienteNombre = "";
            ClienteID = "";
            VehiculoNombre = "";
            VehiculoID = "";
            status = "";
            precio = "";
            vofReserva = true;
        }




    }
    async Task ReservarVehiculo()
    {
        HttpClient http = new HttpClient();
        string URI = "https://finalprog3-930fc-default-rtdb.firebaseio.com/Reservas.json";

        var reserva = new Reservas { Desde = fecha1, Hasta = fecha2, Estado = "YES", VehiculoID = VehiculoID };

        var json = JsonConvert.SerializeObject(reserva, Formatting.Indented);

        var reserva2 = new StringContent(json);

        await http.PostAsync(URI, reserva2);

    }



    //------------------------------------ END --------------------------------------------------------

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
